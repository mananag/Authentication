(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{84:function(e,t,n){"use strict";n.r(t);var a,c,i,s,r=n(2),l=n.n(r),j=n(64),o=n.n(j),d=n(9),u=n(26),b=n(10),O=n(21),h=n(28),p=Object(d.gql)(a||(a=Object(h.a)(["\n    {\n        user {\n            id\n            email\n        }\n    }\n"]))),m=Object(d.gql)(c||(c=Object(h.a)(["\n    mutation {\n        logout{\n            id\n            email\n        }\n    }\n"]))),x=n(4),g=function(e){var t=Object(d.useQuery)(p),n=t.loading,a=t.error,c=t.data,i=Object(d.useMutation)(m),s=Object(O.a)(i,1)[0],r=function(){s({refetchQueries:[{query:p}]})};return a?Object(x.jsx)("div",{children:"Loading"}):Object(x.jsx)("nav",{children:Object(x.jsxs)("div",{className:"nav-wrapper",children:[Object(x.jsx)(u.b,{to:"/",className:"brand-logo left",children:"Home"}),Object(x.jsx)("ul",{className:"right",children:n?Object(x.jsx)("div",{children:"Loading"}):c.user?Object(x.jsx)("li",{children:Object(x.jsx)("a",{onClick:r,children:"Logout"})}):Object(x.jsxs)("div",{children:[Object(x.jsx)("li",{children:Object(x.jsx)(u.b,{to:"/login",children:"Log In"})}),Object(x.jsx)("li",{children:Object(x.jsx)(u.b,{to:"/signup",children:"Sign Up"})})]})})]})})},v=Object(d.gql)(i||(i=Object(h.a)(["\n    mutation Login($email: String!, $password: String!){\n        login(email: $email, password: $password) {\n            id\n            email\n        }\n    }\n"]))),f=function(){var e=Object(r.useState)(""),t=Object(O.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),i=Object(O.a)(c,2),s=i[0],l=i[1],j=Object(r.useState)(""),o=Object(O.a)(j,2),u=o[0],h=o[1],m=Object(b.g)(),g=Object(d.useQuery)(p).data,f=Object(d.useMutation)(v),w=Object(O.a)(f,1)[0];return Object(x.jsxs)("div",{className:"row",children:[function(e){if(e.user)return Object(x.jsx)(b.a,{to:"/"})}(g),Object(x.jsxs)("form",{className:"col s4",onSubmit:function(e){e.preventDefault(),w({variables:{email:n,password:s},refetchQueries:[{query:p}]}).then((function(e){m.push("/")})).catch((function(e){e&&(h("Invalid Credentials"),console.log())}))},children:[Object(x.jsx)("h3",{children:"Login"}),Object(x.jsxs)("div",{className:"input-field",children:[Object(x.jsx)("input",{className:u&&"invalid",type:"text",id:"email",name:"email",value:n,onChange:function(e){return a(e.target.value)}}),Object(x.jsx)("label",{htmlFor:"email",children:"Email"})]}),Object(x.jsxs)("div",{className:"input-field",children:[Object(x.jsx)("input",{className:u&&"invalid",type:"password",value:s,id:"password",onChange:function(e){return l(e.target.value)}}),Object(x.jsx)("label",{htmlFor:"password",children:"Password"}),Object(x.jsx)("span",{className:"helper-text",style:{color:"red"},"data-error":"Invalid Credentials",children:u})]}),Object(x.jsx)("button",{className:"btn",type:"submit",children:"Login"})]})]})},w=Object(d.gql)(s||(s=Object(h.a)(["\n    mutation SignUp($email: String!, $password: String!){\n        signup(email: $email, password: $password) {\n            id\n            email\n        }\n    }\n"]))),N=function(){var e=Object(r.useState)(""),t=Object(O.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),i=Object(O.a)(c,2),s=i[0],l=i[1],j=Object(r.useState)(""),o=Object(O.a)(j,2),u=o[0],h=o[1],m=Object(b.g)(),g=Object(d.useQuery)(p).data,v=Object(d.useMutation)(w),f=Object(O.a)(v,1)[0];return Object(x.jsxs)("div",{className:"row",children:[function(e){if(e.user)return Object(x.jsx)(b.a,{to:"/"})}(g),Object(x.jsxs)("form",{className:"col s4",onSubmit:function(e){e.preventDefault(),f({variables:{email:n,password:s},refetchQueries:[{query:p}]}).then((function(e){m.push("/")})).catch((function(e){e&&(h("Email Address already Existed"),console.log(e))}))},children:[Object(x.jsx)("h3",{children:"Create New Account"}),Object(x.jsxs)("div",{className:"input-field",children:[Object(x.jsx)("input",{className:u&&"invalid",type:"email",id:"email",name:"email",value:n,required:!0,onChange:function(e){return a(e.target.value)}}),Object(x.jsx)("label",{htmlFor:"email",children:"Email"})]}),Object(x.jsxs)("div",{className:"input-field",children:[Object(x.jsx)("input",{className:u&&"invalid",type:"password",value:s,id:"password",onChange:function(e){return l(e.target.value)}}),Object(x.jsx)("label",{htmlFor:"password",children:"Password"}),Object(x.jsx)("span",{className:"helper-text",style:{color:"red"},"data-error":"Invalid Credentials",children:u})]}),Object(x.jsx)("button",{className:"btn",type:"submit",children:"Create Account"})]})]})},y=n(69),S=function(e){var t=function(t){var n=Object(d.useQuery)(p),a=n.loading,c=n.data;return a?Object(x.jsx)("div",{children:"Loading"}):c.user?Object(x.jsx)(e,Object(y.a)({},t)):Object(x.jsx)(b.a,{to:"login"})};return Object(x.jsx)(t,{})},C=Object(d.createHttpLink)({uri:"https://qraphql-authentication.herokuapp.com/graphql",credentials:"include"}),q=new d.ApolloClient({cache:new d.InMemoryCache,link:C}),L=function(){return Object(x.jsx)("div",{children:"You are logged in!!"})};var F=function(){return Object(x.jsx)(d.ApolloProvider,{client:q,children:Object(x.jsxs)(u.a,{children:[Object(x.jsx)(b.b,{path:"/",children:Object(x.jsx)(g,{})}),Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.b,{exact:!0,path:"/dashboard",children:S(L)}),Object(x.jsx)(b.b,{path:"/login",children:Object(x.jsx)(f,{})}),Object(x.jsx)(b.b,{path:"/signup",children:Object(x.jsx)(N,{})})]})]})})},$=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,85)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),i(e),s(e)}))};o.a.render(Object(x.jsx)(l.a.StrictMode,{children:Object(x.jsx)(F,{})}),document.getElementById("root")),$()}},[[84,1,2]]]);
//# sourceMappingURL=main.c9fad487.chunk.js.map